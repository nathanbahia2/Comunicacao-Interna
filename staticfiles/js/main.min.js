$(function(){$('[data-toggle="tooltip"]').tooltip()}),$('input[type="date"]').each((e,o)=>{if($(o).attr("value")){const e=$(o).attr("value");$(o).val(e.split("/").reverse().join("-"))}else{const e=(new Date).toLocaleDateString();$(o).val(e.split("/").reverse().join("-"))}});const form_dias=$("#dias");form_dias.on("change",function(){const e=$(this).val();location.href=`${location.origin}${location.pathname}?dias=${e}`});const btn_finaliza_entrega=$(".btn-finaliza-entrega");btn_finaliza_entrega.on("click",function(){const e=$(this).data("entrega");Swal.fire({title:"Finalizar entrega",width:800,showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Confirmar",reverseButtons:!0,allowOutsideClick:!1,html:"\n            <div>\n                <div class=\"form-group text-left mb-3\">\n                    <label for=\"recebimento_pedido\">Data e hora do recebimento do pedido</label>\n                    <input type=\"datetime-local\" class='form-control' id='recebimento_pedido' name='recebimento_pedido' class='form-control'>\n                </div>\n                <div class=\"form-group text-left mb-3\">\n                    <label for=\"observacao_final\">Observação final</label>\n                    <textarea id='observacao_final' name='observacao_final' class='form-control' rows='3'></textarea>\n                </div>\n            </div>\n        "}).then(o=>{if(o.value){const o=$("#recebimento_pedido").val(),t=$("#observacao_final").val();$.post({url:"/entregas/finalizar/",data:{entrega:e,recebimento_pedido:o,observacao_final:t},success:function(e){e&&Swal.fire({icon:"success",title:"Entrega finalizada com sucesso"}).then(()=>{location.reload()})}})}})});const info_elogio=$(".btn-info-elogio");info_elogio.on("click",function(){const e=$(this).data("elogio");$.get({url:"/elogios/info",data:{elogio:e},success:function(e){Swal.fire({icon:"info",title:"Informações do elogio",width:800,html:`\n                    <div class="text-left">\n                        <b>Data</b>: ${e.data} <br>\n                        <b>Funcionário</b>: ${e.funcionario} <br>\n                        <b>Cargo</b>: ${e.cargo} <br>\n                        <b>Observação</b>: ${e.observacao} <br>\n                        <b>Cadastro</b>: ${e.usuario} em ${new Date(e.criacao).toLocaleDateString()} <br>\n                    </div>`})}})});const info_ocorrencia=$(".btn-info-ocorrencia");info_ocorrencia.on("click",function(){const e=$(this).data("ocorrencia");$.get({url:"/ocorrencias/info",data:{ocorrencia:e},success:function(e){Swal.fire({icon:"info",title:"Informações da ocorrência",width:800,html:`\n                    <div class="text-left">\n                        <b>Data</b>: ${e.data} <br>\n                        <b>Funcionário</b>: ${e.funcionario} <br>\n                        <b>Cargo</b>: ${e.cargo} <br>\n                        <b>Motivo</b>: ${e.motivo} <br>\n                        <b>Observação</b>: ${e.observacao} <br>\n                        <b>Cadastro</b>: ${e.usuario} em ${new Date(e.criacao).toLocaleDateString()} <br>\n                    </div>`})}})});const info_entrega=$(".btn-info-entrega");function deleteObj({id:e,button:o,title:t,text:n,model:a,msgSuccess:i,msgError:c}){const r=o.parent().parent().parent();Swal.fire({icon:"question",title:t,text:n,showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonText:"Confirmar",reverseButtons:!0}).then(o=>{o.value&&$.post({url:"/delete/obj/",data:{data:e,model:a},success:function(e){!0===e?Swal.fire({icon:"success",title:i}).then(()=>{r.remove()}):Swal.fire({icon:"error",title:c})}})})}info_entrega.on("click",function(){const e=$(this).data("entrega");$.get({url:"/entregas/entregas/info",data:{entrega:e},success:function(e){const o=e.recebida?{text:'<span class="text-success">Recebido</span>',icon:"success"}:{text:'<span class="text-danger">Pendente</span>',icon:"warning"};Swal.fire({icon:o.icon,width:800,html:`\n                    <h2>Status: ${o.text}</h2><hr>\n                    <div class="text-left">\n                        <div>\n                            <b>Cliente</b>: ${e.cliente} \n                            <b>Endereço</b>: ${e.endereco}\n                        </div>\n                        <br>\n                        <div>\n                            <b>Pedido</b>: ${e.pedido} \n                            <b>Valor</b>: ${e.valor}\n                        </div>\n                        <br>\n                        <div>\n                            <b>Entregador</b>: ${e.entregador} \n                            <b>Saída</b>: ${e.saida}\n                            <b>Recebimento</b>: ${e.recebimento}\n                        </div>\n                        <br>\n                        <b>Cadastro</b>: ${e.cadastro}<br><br>\n                        <b>Detalhes do pedido</b>: ${e.detalhes||"-----"}<br><br>\n                        <b>Observação final</b>: ${e.observacao||"-----"}<br><br>\n                    </div>`})}})}),$(".btn-delete-elogio").on("click",function(){const e=$(this);deleteObj({id:$(this).data("elogio"),button:e,title:"Excluir elogio",text:"Tem certeza que deseja excluir este elogio?",model:"elogios",msgSuccess:"Elogio excluído com sucesso",msgError:"Falha ao excluir elogio"})}),$(".btn-delete-ocorrencia").on("click",function(){const e=$(this);deleteObj({id:$(this).data("ocorrencia"),button:e,title:"Excluir ocorrência",text:"Tem certeza que deseja excluir esta ocorrência?",model:"ocorrencias",msgSuccess:"Ocorrência excluída com sucesso",msgError:"Falha ao excluir ocorrência"})}),$(".btn-delete-email").on("click",function(){const e=$(this);deleteObj({id:$(this).data("email"),button:e,title:"Excluir e-mail",text:"Tem certeza que deseja excluir este e-mail?",model:"email",msgSuccess:"E-mail excluído com sucesso",msgError:"Falha ao excluir e-mail"})}),$(".btn-delete-funcionario").on("click",function(){const e=$(this);deleteObj({id:$(this).data("funcionario"),button:e,title:"Excluir funcionário",text:"Tem certeza que deseja excluir este funcionário?",model:"funcionarios",msgSuccess:"Funcionário excluído com sucesso",msgError:"Falha ao excluir funcionário"})}),$(".btn-delete-cargo").on("click",function(){const e=$(this);deleteObj({id:$(this).data("cargo"),button:e,title:"Excluir cargo",text:"Tem certeza que deseja excluir este cargo?",model:"cargos",msgSuccess:"Cargo excluído com sucesso",msgError:"Falha ao excluir cargo"})}),$(".btn-delete-motivo").on("click",function(){const e=$(this);deleteObj({id:$(this).data("motivo"),button:e,title:"Excluir motivo",text:"Tem certeza que deseja excluir este motivo?",model:"motivos",msgSuccess:"Motivo excluído com sucesso",msgError:"Falha ao excluir motivo"})}),$(".btn-delete-usuario").on("click",function(){const e=$(this);deleteObj({id:$(this).data("usuario"),button:e,title:"Excluir usuário",text:"Tem certeza que deseja excluir este usuário?",model:"usuarios",msgSuccess:"Usuário excluído com sucesso",msgError:"Falha ao excluir usuário"})}),$(".btn-delete-entregador").on("click",function(){const e=$(this);deleteObj({id:$(this).data("entregador"),button:e,title:"Excluir entregador",text:"Tem certeza que deseja excluir este entregador?",model:"entregador",msgSuccess:"Entregador excluído com sucesso",msgError:"Falha ao excluir entregador"})}),$(".btn-delete-entrega").on("click",function(){const e=$(this);deleteObj({id:$(this).data("entrega"),button:e,title:"Excluir entrega",text:"Tem certeza que deseja excluir esta entrega?",model:"entrega",msgSuccess:"Entrega excluída com sucesso",msgError:"Falha ao excluir entrega"})});